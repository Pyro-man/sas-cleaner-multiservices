var GRVEMAP=GRVEMAP||{};!function(e){"use strict";function t(e,t,a){this.latlng=e,this.args=a,this.setMap(t)}GRVEMAP={init:function(){this.map()},map:function(){e(".grve-map").each(function(){var a=e(this),o=a.attr("data-lat"),r=a.attr("data-lng");if(a.hasClass("grve-map-loaded"))a.trigger("grve_redraw_map");else{var i=parseInt(a.attr("data-zoom"))?parseInt(a.attr("data-zoom")):14,n=a.attr("data-disable-style")?a.attr("data-disable-style"):"no",l=new google.maps.LatLng(o,r),s=parseInt(impeka_grve_maps_data.custom_enabled),p=function(e){try{var t=JSON.parse(e);if(t&&"object"==typeof t)return t}catch(e){return!1}}(impeka_grve_maps_data.custom_code),g=parseInt(impeka_grve_maps_data.label_enabled),d=parseInt(impeka_grve_maps_data.zoom_enabled),m=parseInt(impeka_grve_maps_data.type_control),v=impeka_grve_maps_data.gesture_handling,c="off",_=[];1==g&&(c="on"),1==s&&"no"==n?_=[{featureType:"water",stylers:[{color:impeka_grve_maps_data.water_color}]},{featureType:"landscape",stylers:[{color:impeka_grve_maps_data.lanscape_color}]},{featureType:"poi",stylers:[{color:impeka_grve_maps_data.poi_color}]},{featureType:"road",elementType:"geometry",stylers:[{color:impeka_grve_maps_data.road_color}]},{featureType:"transit",stylers:[{visibility:"off"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text",stylers:[{visibility:c}]},{elementType:"labels.text.fill",stylers:[{color:impeka_grve_maps_data.label_color}]},{elementType:"labels.text.stroke",stylers:[{color:impeka_grve_maps_data.label_stroke_color}]},{featureType:"administrative.country",elementType:"geometry",stylers:[{color:impeka_grve_maps_data.country_color}]}]:2==s&&"no"==n&&(_=p);var y=!1,u=!0;0!=s&&(y=!0,u=1==d);var f=!1,h={zoom:i,center:l,draggable:!0,scrollwheel:!1,mapTypeControl:!1,zoomControl:u,gestureHandling:v,disableDefaultUI:y,mapTypeControl:f=1==m,mapTypeControlOptions:{mapTypeIds:["roadmap","hybrid","satellite","terrain"],style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},styles:_,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.LEFT_CENTER}},b=new google.maps.Map(a.get(0),h),k=new google.maps.LatLngBounds,w=[];a.parent().children(".grve-map-point").each(function(a){var o=e(this),r=o.attr("data-point-marker"),i=o.attr("data-point-title"),n=o.attr("data-point-open"),l=parseFloat(o.attr("data-point-lat")),s=parseFloat(o.attr("data-point-lng")),p=void 0!=o.attr("data-point-type")?o.attr("data-point-type"):"image",g=void 0!=o.attr("data-point-bg-color")?o.attr("data-point-bg-color"):"black",d=new google.maps.LatLng(l,s),m=o.html(),v=m.trim(),c="",_=new google.maps.Marker({position:d,clickable:!!v,map:b,icon:r,title:i});if(""===p&&(p="image"),"image"!=p){var y=new t(d,b,{type:p,bg_color:g,clickable:!!v,title:i});c=y}else c=_;if(v){var u=new google.maps.InfoWindow({content:m});google.maps.event.addListener(c,"click",function(){u.open(b,c)}),"yes"==n&&setTimeout(function(){u.open(b,c)},2e3)}w.push(_),k.extend(_.position)}),a.parent().children(".grve-map-point").length>1?(b.fitBounds(k),e(window).on("resize",function(){b.fitBounds(k)})):e(window).on("resize",function(){b.panTo(l)}),e(".grve-map").on("grve_redraw_map",function(){a.parent().children(".grve-map-point").length>1?b.fitBounds(k):b.panTo(l)}),a.css({opacity:0}),a.delay(600).animate({opacity:1}),a.addClass("grve-map-loaded")}})}},(t.prototype=new google.maps.OverlayView).draw=function(){var t=this,a=this.div,o="black",r=!1,i="",n="";if(!a){void 0!==t.args.bg_color&&(o=t.args.bg_color),void 0!==t.args.clickable&&(r=t.args.clickable),void 0!==t.args.title&&(i=t.args.title),void 0!==t.args.type&&(n=t.args.type),(a=this.div="dot"==n?e('<div><div class="grve-marker-dot" title="'+i+'"><div class="grve-dot grve-bg-'+o+'"></div></div></div>')[0]:e('<div><div class="grve-marker-pulse-dot" title="'+i+'"><div class="grve-dot grve-bg-'+o+'"></div><div class="grve-first-pulse grve-bg-'+o+'"></div><div class="grve-second-pulse grve-bg-'+o+'"></div></div></div>')[0]).style.position="absolute",a.style.paddingLeft="0px",r&&(a.style.cursor="pointer"),google.maps.event.addDomListener(a,"click",function(e){google.maps.event.trigger(t,"click")});this.getPanes().overlayImage.appendChild(a)}var l=this.getProjection().fromLatLngToDivPixel(this.latlng);l&&(a.style.left=l.x+"px",a.style.top=l.y+"px")},t.prototype.remove=function(){this.div&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.getPosition=function(){return this.latlng};GRVEMAP.init(),e(window).on("orientationchange",function(){setTimeout(function(){e(".grve-map").trigger("grve_redraw_map")},500)}),e(document).on("click",".grve-tab-link",function(){var t=e(this).attr("data-rel");""!=t&&e(t+" .grve-map").length&&setTimeout(function(){e(".grve-map").trigger("grve_redraw_map")},500)}),e(window).on("load",function(){var t=t||navigator.userAgent,a=t.indexOf("MSIE ")>-1||t.indexOf("Trident/")>-1||t.indexOf("Edge/")>-1;(e(".grve-body").hasClass("compose-mode")||e("#grve-feature-section .grve-map").length&&a)&&e(".grve-map").trigger("grve_redraw_map")})}(jQuery);